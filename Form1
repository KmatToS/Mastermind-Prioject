using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Mastermind
{
    public partial class Form1 : Form
    {
        solutionClass Solution = new solutionClass();
        int guessCount = 10; //can be adjusted through a difficulty pop-up, but for now may as well leave it at 10
        public Form1()
        {
            InitializeComponent();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void btnConfirm_Click(object sender, EventArgs e)
        {
            if (firstBox.Text == "" || secondBox.Text == "" || thirdBox.Text == "" || fourthBox.Text == "")
            {
                MessageBox.Show("There are no \"empty\" pegs in the code. You must choose a color for all four pegs.", "Error");
                return;
            }
            int correctColor = 0;
            int correctPosition = 0;
            guessCount--;
            lblGuessCount.Text = ("You have " + guessCount + " guesses remaining.");

            codeClass guessCode =  new codeClass(firstBox.Text, secondBox.Text, thirdBox.Text, fourthBox.Text);

            if (Solution.Check(guessCode, out correctColor, out correctPosition))
            {//this will only trigger if Solution returns "true" if all 4 pegs are correct
                MessageBox.Show("Holy carp you won", "A Winner Is You");
                this.Close();
            }
            else
            { //this should update the show the number of correct colors and positions
                MessageBox.Show("You did not solve the game. /n /n Of the colors you entered, " + correctColor 
                    + " of them were of the correct color. /n /n Among those, " + correctPosition
                    + " of them were also in the correct position. /n /n You have " + guessCount + " guesses remaining.");
            }
        }

        private void btnRules_Click(object sender, EventArgs e)
        { //Explananation of the rules because why not
            MessageBox.Show("In order to win the game, you must enter the correct combination of colored pegs that matches the hidden code randomly generated by the computer." +
                "\n \n Each time you make a guess, the game will tell you how many of the pegs you entered are of the correct color, but not in the correct place." +
                " \n \n It will also tell you how many pegs are both of the correct color and in the correct position." +
                "\n \n You have a limited number of guesses, so make the most of each guess. If you run out of guesses before you crack the code, the game is over.", 
                "Mastermind Game Rules");
            return;
        }

        private void btnCheat_Click(object sender, EventArgs e)
        {
            //for the purpose of demonstrating this would reveal the solution code. May end up removing this anyway since it's going to be a pain to implement.
            return;
        }
    }//end class
}//end namespace
